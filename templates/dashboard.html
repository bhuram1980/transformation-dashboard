<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    <link rel="stylesheet" href="/static/css/style.css?v=20251127a">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="alternate icon" type="image/png" href="/static/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="page-surface">
        <div class="dashboard-container">
            <!-- Section 1: Today Hero -->
            <section class="layout-section today-hero" id="todayHero">
                <div class="section-heading">
                    <h1 class="dashboard-title">Mindset: If I'm Not Shredded I'm Dead (No Third Option)</h1>
                </div>
                <div class="grid-12 hero-grid">
                    <div class="card-surface hero-card hero-streak col-span-12">
                        <div class="hero-card-label">Current streak</div>
                        <div class="streak-container">
                            <div class="streak-number" id="streakCount">0</div>
                            <div class="streak-label">Day Streak</div>
                        </div>
                        <div class="hero-card-meta" id="streakMeta">Logs arrive nightly</div>
                    </div>
                    <div class="card-surface weight-highlight-card col-span-12">
                        <div class="weight-headline">
                            <span class="weight-headline-label">Fasted Weight Today:</span>
                            <span class="weight-highlight-value" id="weightValue">-- kg</span>
                        </div>
                        <div class="weight-highlight-delta" id="weightDelta">
                            <span class="delta-arrow" id="weightDeltaArrow">‚Äî</span>
                            <span class="delta-text" id="weightDeltaText">Need Day 1 + latest weight to compare</span>
                        </div>
                        <p class="weight-highlight-meta" id="weightMeta"></p>
                        <button class="weight-graph-toggle-btn" id="weightGraphToggle" onclick="toggleWeightGraph()">
                            <span class="toggle-btn-icon">üìä</span>
                            <span class="toggle-btn-text">View Weight Trend Graph</span>
                        </button>
                    </div>
                    <div class="card-surface weight-graph-card col-span-12" id="weightGraphCard" style="display: none;">
                        <div class="weight-graph-header">
                            <div>
                                <p class="hero-card-label">Progress Analytics</p>
                                <p class="weight-graph-subtitle">Interactive chart with drag & zoom</p>
                            </div>
                            <button class="weight-graph-close-btn" onclick="toggleWeightGraph()" aria-label="Close graph">
                                ‚úï
                            </button>
                        </div>
                        <div class="weight-graph-controls">
                            <div class="graph-timeframe-buttons">
                                <button class="timeframe-btn active" data-timeframe="7" onclick="setTimeframe(7)">7d</button>
                                <button class="timeframe-btn" data-timeframe="30" onclick="setTimeframe(30)">30d</button>
                                <button class="timeframe-btn" data-timeframe="90" onclick="setTimeframe(90)">90d</button>
                                <button class="timeframe-btn" data-timeframe="all" onclick="setTimeframe('all')">All</button>
                            </div>
                            <div class="graph-metric-toggles">
                                <label class="metric-toggle">
                                    <input type="checkbox" checked data-metric="weight" onchange="toggleMetric('weight', this.checked)">
                                    <span>Weight</span>
                                </label>
                                <label class="metric-toggle">
                                    <input type="checkbox" data-metric="waist" onchange="toggleMetric('waist', this.checked)">
                                    <span>Waist</span>
                                </label>
                                <label class="metric-toggle">
                                    <input type="checkbox" data-metric="protein" onchange="toggleMetric('protein', this.checked)">
                                    <span>Protein</span>
                                </label>
                            </div>
                            <button class="graph-reset-btn" onclick="resetChartZoom()" title="Reset zoom">
                                üîç Reset
                            </button>
                        </div>
                        <div class="weight-graph-container">
                            <canvas id="weightChart"></canvas>
                        </div>
                        <div class="graph-legend">
                            <p class="graph-hint">üí° Drag to pan ‚Ä¢ Scroll to zoom ‚Ä¢ Click points for details</p>
                        </div>
                    </div>
                    <div class="card-surface fish-total-card col-span-12">
                        <div class="fish-total-header">
                            <span class="fish-total-label">Total fish demolished</span>
                            <span class="fish-total-emoji">üêü</span>
                        </div>
                        <div class="fish-total-value-row">
                            <span class="fish-total-value" id="fishTotal">0.00 kg</span>
                        </div>
                        <p class="fish-total-meta" id="fishLifetimeMeta">Lifetime edible weight</p>
                        <p class="fish-total-weekly" id="fishWeeklyMeta">0.0 / 7.0 kg this week</p>
                    </div>
                    <div class="card-surface hero-card today-score-card col-span-12 col-lg-6" id="todayScoreCard">
                        <div class="hero-card-label">Today score</div>
                        <div class="score-card-body">
                            <div class="score-ring">
                                <svg viewBox="0 0 120 120">
                                    <circle class="score-ring-track" cx="60" cy="60" r="52"></circle>
                                    <circle class="score-ring-progress" id="scoreRingProgress" cx="60" cy="60" r="52"></circle>
                                </svg>
                                <div class="score-ring-center" id="scoreRingValue">0</div>
                            </div>
                            <div class="score-card-text">
                                <div class="hero-score-value" id="todayScoreValue">-- / 5</div>
                                <div class="hero-card-meta" id="todayScoreMeta">Score updates with new log</div>
                            </div>
                        </div>
                        <ul class="score-criteria" id="scoreCriteriaList">
                            <!-- Criteria will be populated dynamically -->
                        </ul>
                    </div>
                </div>
                <div class="hero-badges" id="heroBadges"></div>
            </section>

            <!-- Section 2: Long-term transformation -->
            <section class="layout-section long-term-section" id="longTermSection">
                <div class="section-heading">
                    <p class="section-eyebrow">Long-term transformation</p>
                    <h2 class="section-title">Mission progress</h2>
                </div>
                <div class="grid-12 long-term-grid">
                    <div class="goal-baseline-section card-surface col-span-12">
                        <h3 class="section-subtitle">Main Goal</h3>
                        <div class="goal-description" id="goalDescription">Loading...</div>
                    </div>
                    <div class="goals-section card-surface col-span-12">
                        <div class="targets-header" onclick="toggleTargets()">
                            <h3 class="section-subtitle">Targets</h3>
                            <span class="targets-toggle-icon" id="targetsToggleIcon">‚ñº</span>
                        </div>
                        <div class="metric-rings-container" id="targetsContainer">
                            <div class="metric-ring-grid">
                                <div class="metric-ring-item" id="metricWeightRing">
                                    <div class="ring-wrapper">
                                        <svg class="metric-ring" viewBox="0 0 100 100">
                                            <circle class="ring-bg" cx="50" cy="50" r="42"></circle>
                                            <circle class="ring-progress" id="weightRingProgress" cx="50" cy="50" r="42"></circle>
                                        </svg>
                                        <div class="ring-content">
                                            <div class="ring-value" id="weightRingValue">--</div>
                                            <div class="ring-label">Weight</div>
                                            <div class="ring-target" id="weightRingTarget">82-85 kg</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="metric-ring-item" id="metricBodyFatRing">
                                    <div class="ring-wrapper">
                                        <svg class="metric-ring" viewBox="0 0 100 100">
                                            <circle class="ring-bg" cx="50" cy="50" r="42"></circle>
                                            <circle class="ring-progress" id="bodyFatRingProgress" cx="50" cy="50" r="42"></circle>
                                        </svg>
                                        <div class="ring-content">
                                            <div class="ring-value" id="bodyFatRingValue">--</div>
                                            <div class="ring-label">Body Fat</div>
                                            <div class="ring-target" id="bodyFatRingTarget">‚â§13%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="metric-ring-item" id="metricAndroidRing">
                                    <div class="ring-wrapper">
                                        <svg class="metric-ring" viewBox="0 0 100 100">
                                            <circle class="ring-bg" cx="50" cy="50" r="42"></circle>
                                            <circle class="ring-progress" id="androidRingProgress" cx="50" cy="50" r="42"></circle>
                                        </svg>
                                        <div class="ring-content">
                                            <div class="ring-value" id="androidRingValue">--</div>
                                            <div class="ring-label">Android Fat</div>
                                            <div class="ring-target" id="androidRingTarget">‚â§15%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="metric-ring-item" id="metricAltRing">
                                    <div class="ring-wrapper">
                                        <svg class="metric-ring" viewBox="0 0 100 100">
                                            <circle class="ring-bg" cx="50" cy="50" r="42"></circle>
                                            <circle class="ring-progress" id="altRingProgress" cx="50" cy="50" r="42"></circle>
                                        </svg>
                                        <div class="ring-content">
                                            <div class="ring-value" id="altRingValue">--</div>
                                            <div class="ring-label">ALT</div>
                                            <div class="ring-target" id="altRingTarget">&lt;80</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="metric-ring-item" id="metricGlucoseRing">
                                    <div class="ring-wrapper">
                                        <svg class="metric-ring" viewBox="0 0 100 100">
                                            <circle class="ring-bg" cx="50" cy="50" r="42"></circle>
                                            <circle class="ring-progress" id="glucoseRingProgress" cx="50" cy="50" r="42"></circle>
                                        </svg>
                                        <div class="ring-content">
                                            <div class="ring-value" id="glucoseRingValue">--</div>
                                            <div class="ring-label">Glucose</div>
                                            <div class="ring-target" id="glucoseRingTarget">&lt;95</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Today Log -->
            <section class="layout-section todays-log-section" id="todaysLogSection">
                <div class="section-heading">
                    <p class="section-eyebrow">Today‚Äôs log</p>
                    <h2 class="section-title">What I Ate Today</h2>
                </div>
                <div class="meals-section card-surface">
                    <div class="day-selector">
                        <label class="day-select-label">Select Day:</label>
                        <div class="day-pill-wrapper">
                            <button class="day-pill-nav" id="prevDayBtn" onclick="navigateDay(-1)" aria-label="Previous day">‚Üê</button>
                            <div class="day-pill-scroll">
                                <div class="day-pill-track" id="dayPillContainer"></div>
                            </div>
                            <button class="day-pill-nav" id="nextDayBtn" onclick="navigateDay(1)" aria-label="Next day">‚Üí</button>
                        </div>
                        <select id="daySelect" class="day-select-dropdown" onchange="loadDayMeals()" aria-label="Select day backup">
                            <option value="">Loading...</option>
                        </select>
                    </div>
                    <div id="dayMeals" class="meals-content">
                        <div class="meals-placeholder-card">
                            <p>Select a day to view meals, macros, supplements, and notes.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="/static/js/dashboard.js?v=20251129a"></script>
</body>
</html>
